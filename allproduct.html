<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>K-Chords | K-和弦</title>
  <link rel="stylesheet" href="css/allproduct.css" />
</head>
<body>
  <header>
    <h1>
      <a href="index.html">K-Chords | K-和弦</a>
    </h1>
<div class="nav-container">
  <div class="search-wrapper">
    <input type="text" id="searchInput" class="search-bar" placeholder="搜尋商品、團名、商品類型..." />
    <div id="searchResults" class="search-results"></div>
  </div>
</div>
    <nav>
      <ul>
        <li><a href="cart.html">購物車</a></li>
        <li><a href="loging.html">會員註冊/登入</a></li>
        <li><a href="member.html">會員資料</a></li>
      </ul>
    </nav>
  </header>

  <div class="sidebar">
    <ul>
      <li><a href="allproduct.html?category=全部商品" data-category="全部商品">全部商品</a></li>
      <li><a href="allproduct.html?category=官方專輯" data-category="官方專輯">官方專輯</a></li>
      <li><a href="allproduct.html?category=官方手燈" data-category="官方手燈">官方手燈</a></li>
      <li><a href="allproduct.html?category=官方周邊" data-category="官方周邊">官方周邊</a></li>
    </ul>
  </div>

  <div class="main-content">
    <div class="product-grid" id="productGrid"></div>
  </div>

  <script>
    const products = [
      { id: 1, name: "CORTIS - THE 1ST EP [COLOR OUTSIDE THE LINES]", image: "image/photo1.jpg", price: 530, sidebar: "官方專輯" },
      { id: 2, name: "RIIZE - 2ND SINGLE [FAME]  單曲二輯", image: "image/photo2.jpg", price: 530, sidebar: "官方專輯" },
      { id: 3, name: "YEONJUN(TXT) NO LABELS: PART 01", image: "image/photo3.jpg", price: 550, sidebar: "官方專輯" },
      { id: 4, name: "IVE - THE 4TH EP [IVE SECRET]", image: "image/photo4.jpg", price: 520, sidebar: "官方專輯" },
      { id: 5, name: "JENNIE (BLACKPINK) - [RUBY] (LP) 黑膠唱片", image: "image/photo5.jpg", price: 1505, sidebar: "官方專輯" },
      { id: 6, name: "CORTIS - 2026 SEASON'S GREETINGS 年曆組合", image: "image/photo6.jpg", price: 1460, sidebar: "官方周邊" },
      { id: 7, name: "NMIXX - 2026 SEASON'S GREETINGS 年曆組合", image: "image/photo7.jpg", price: 1380, sidebar: "官方周邊" },
      { id: 8, name: "TXT-2026 SEASON'S GREETINGS 年曆組合", image: "image/photo8.jpg", price: 770, sidebar: "官方周邊" },
      { id: 9, name: "IZNA - 2026 SEASON'S GREETINGS 年曆組合", image: "image/photo9.jpg", price: 1540, sidebar: "官方周邊" },
      { id: 10, name: "KISS OF LIFE - 2026 SEASON'S GREETINGS 年曆組合", image: "image/photo10.jpg", price: 1325, sidebar: "官方周邊" },
      { id: 11, name: "NEWJEANS OFFICIAL LIGHT STICK 官方應援手燈", image: "image/photo11.jpg", price: 1820, sidebar: "官方手燈" },
      { id: 12, name: "LE SSERAFIM OFFICIAL LIGHT STICK 官方應援手燈", image: "image/photo12.jpg", price: 1990, sidebar: "官方手燈" },
      { id: 13, name: "BTS OFFICIAL LIGHT STICK 第三代官方應援手燈", image: "image/photo13.jpg", price: 2100, sidebar: "官方手燈" },
      { id: 14, name: "SEVENTEEN OFFICIAL LIGHT STICK 第三代官方應援手燈", image: "image/photo14.jpg", price: 2180, sidebar: "官方手燈" },
      { id: 15, name: "BLACKPINK OFFICIAL LIGHT STICK 第二代官方應援手燈", image: "image/photo15.jpg", price: 1980, sidebar: "官方手燈" },
    ];

    const grid = document.getElementById("productGrid");
    const categoryLinks = document.querySelectorAll(".sidebar a");

    function renderProducts(filterCategory = "全部商品") {
      grid.innerHTML = "";
      const filtered = filterCategory === "全部商品"
        ? products
        : products.filter(p => p.sidebar === filterCategory);

      filtered.forEach(product => {
        const card = document.createElement("div");
        card.className = "product-card";
        card.innerHTML = `
          <img src="${product.image}" alt="${product.name}">
          <h3>${product.name}</h3>
          <p>$${product.price}</p>
        `;
        card.onclick = () => {
          window.location.href = `product.html?id=${product.id}`;
        };
        grid.appendChild(card);
      });
    }

categoryLinks.forEach(link => {
  link.addEventListener("click", (e) => {
    e.preventDefault();

    const selectedCategory = link.dataset.category;

    history.pushState(null, "", `?category=${selectedCategory}`);

    renderProducts(selectedCategory);

    categoryLinks.forEach(l => l.classList.remove("active"));
    link.classList.add("active");
  });
});

    renderProducts();

    // 新增：從 URL 取得分類參數
function getCategoryFromURL() {
  const params = new URLSearchParams(window.location.search);
  return params.get("category") || "全部風格";
}

// 修改：初次渲染時根據 URL 決定分類
const defaultCategory = getCategoryFromURL();
renderProducts(defaultCategory);

// 同步 sidebar active 樣式
categoryLinks.forEach(link => {
  if (link.dataset.category === defaultCategory) {
    link.classList.add("active");
  }
});

  </script>

<script>
const searchProducts = [
  { id: 6, name: "CORTIS 2026 年曆", keywords: ["cortis","年曆","官方專輯"] },
  { id: 7, name: "NMIXX 2026 年曆", keywords: ["nmixx","年曆"] },
  { id: 8, name: "TXT 2026 年曆", keywords: ["txt","年曆"] },
  { id: 9, name: "IZNA 2026 年曆", keywords: ["izna","年曆"] },
  { id: 10, name: "KISS OF LIFE 2026 年曆", keywords: ["kiss","kiof","年曆"] },
  { id: 14, name: "官方周邊套組", keywords: ["周邊","配件"] }
];

const input = document.getElementById("searchInput");
const resultBox = document.getElementById("searchResults");

input.addEventListener("input", function () {
  const keyword = input.value.toLowerCase().trim();
  resultBox.innerHTML = "";
  if (!keyword) {
    resultBox.style.display = "none";
    return;
  }

  const matches = searchProducts.filter(p =>
    p.name.toLowerCase().includes(keyword) ||
    p.keywords.some(k => k.includes(keyword))
  );

  if (matches.length === 0) {
    resultBox.innerHTML = `<div>找不到相關商品</div>`;
  } else {
    matches.forEach(p => {
      const div = document.createElement("div");
      div.textContent = p.name;
      div.onclick = () => {
        window.location.href = `product.html?id=${p.id}`;
      };
      resultBox.appendChild(div);
    });
  }

  resultBox.style.display = "block";
});

document.addEventListener("click", function (e) {
  if (!e.target.closest(".search-wrapper")) {
    resultBox.style.display = "none";
  }
});
</script>

    <footer class="site-footer">
     <div class="footer-box">

      <div class="footer-col">
      <h3>K-Chords | K-和弦</h3>
      <a href="https://www.instagram.com/uyhnz/" target="_blank">IG:K.Chords_official</a>
        商品問題也可以來這裡詢問
      <a href="aboutus.html">關於我們</a>
      </div>

      <div class="footer-col">
      <h3>SERVICE</h3>
      <a href="afterservice.html">退換貨服務 After-sales service</a>
      <a href="qa.html">常見問題 Q&A</a>
      </div>

      <div class="footer-col">
      <h3>COMPANY</h3>
      <a href="contact.html">聯絡我們</a>
      <a href="cooperate.html">合作洽談</a>
      <a href="privacy.html">隱私政策</a>
      <a href="anti-fraud.html">反詐騙公告</a>
      <p class="footer-time">客服時間 Mon.–Fri. 10:00–18:00 (不含例假日)</p>
      </div>
      
     </div>
     <div class="footer-bottom">
        © 2026 K-Chords | K-和弦 All rights reserved.
     </div>
   </footer>


</body>
</html>
